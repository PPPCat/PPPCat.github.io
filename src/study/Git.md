# Git

## 1.Git介绍

Git是开源的版本控制系统，常用于项目的代码管理、文件管理等。

![image-20250714230105810](C:\Users\player\AppData\Roaming\Typora\typora-user-images\image-20250714230105810.png)

![image-20250714230140494](C:\Users\player\AppData\Roaming\Typora\typora-user-images\image-20250714230140494.png)

**历史记录**，可随时翻看历史修改，复原不正确的修改

**跟踪记录**，跟踪记录项目版本迭代过程，方便旧版本回滚、抽离

**保持文件一致性**，帮助团队并行开发

![image-20250714230503790](C:\Users\player\AppData\Roaming\Typora\typora-user-images\image-20250714230503790.png)

![image-20250714230513812](C:\Users\player\AppData\Roaming\Typora\typora-user-images\image-20250714230513812.png)

## 2.Git工作原理

![image-20250714230606027](C:\Users\player\AppData\Roaming\Typora\typora-user-images\image-20250714230606027.png)

**远程服务**

远程服务是Git的服务端，可以是GItlab、Github等平台，也可以是自己搭建的Gitlab。远程服务接收获取、上传文件等请求，并记录每个文件的修改，用户可通过管理网站管理仓库、历史修改等。

远程服务端的文件按仓库为单位存储，可实现多仓库，多级仓库，支持多种文件类型

**本地Git客户端**

系安装在本地的软件，是同步远程仓库和仓库副本的关键，实质上是远程仓库克隆到本地磁盘的一个文件夹，与其文件一一对应

## 3.GIt客户端、服务端安装

**私有化部署Git服务推荐docker形式安装Gitlab**

1.下载GItlab镜像

```
docker pull gitlab/gitlab-ce
```

2.启动GItlab容器

```
docker run --detach \
           --publish 80:80\
           --name gitlab\
           --restart always\
           -e TZ="Asia/Shanghai"
           gitlab\gitlab-ce
```

部署结束可用服务器ip打开管理网站

**Git客户端安装**

1.Windows -下载Git for Windows

```
git --version
```

检查安装是否成功

## 4.GIt常用操作

#### 4.1.新建、管理远程仓库

一般在Git服务的后台管理网页完成

**1.1修改记录**

修改记录是每次上传更新的记录，一个修改记录可能包含多个文件的修改，每个修改记录对应唯一的修改记录id，可以查看单次修改的具体内容，也可以对此次修改进行回滚操作

**1.2分支**

分支是一个远程仓库的多个独立副本，每个分值都是完全独立互不影响的，文件、修改记录都是单独存储的。一个远程长裤默认有一个主分支，默认将文件存储到主分支。创建新分支基于某个修改记录、某个分支、某个tag。

一个分支的多次修改可一次更新到别的分支，成为合并（merge），实际上是对目标分支提交一次新修改，但是可能会由于修改冲突而失败（目标分支也修改了相同文件），此情况需要人工修改更新到目标分支

**1.3tag**

tag是一个表示，用于标记基于某个修改记录归档对应分支下截至此次修改及之前的文件方便版本迭代管理。tag是一个标识，不允许更新文件，分支是独立副本，运行更新文件

**1.4权限**

管理员可对仓库进行用户权限管理包括查看、文件修改、仓库管理等权限管理

#### 4.2克隆、更新本地仓库副本

**克隆远程仓库**

获取克隆地址，使用Git客户端将远程仓库克隆到本地

```
git clone [http克隆地址] [指定目录]
```

默认情况下克隆的是仓库的主分支，通过Git客户端切换分支

```
cd [目标仓库副本目录]
git checkout [切换的分支名]
```

如远程仓库文件发生变化，通过更新操作更新本地仓库副本

```
cd [目标仓库副本目录]
git pull
```

本地仓库文件和远程仓库文件同时发生变化，即更新冲突解决方案

```
cd [目标仓库副本目录]
git stash（暂存本地修改）
git pull（更新）
git stash app（恢复本地修改）
```

#### 4.3上传本地修改

**3.1添加文件到暂存区**

```
cd [目标仓库副本目录]
git status （查看被修改的文件列表）
git add [文件1] [文件2] （提交文件到缓存区）
git add * （提交全部文件到缓存区）
git diff [文件] （查看具体文件修改内容）
```

**3.2提交暂存区到本地仓库**

将暂存区的修改内容打包成一次更新

```
git commit -m "更新日志"
```

**3.3上传远程仓库**

可一次性将多次本地仓库修改同步到远程仓库

```
git push
```

要求本地仓库副本为远程仓库最新版本